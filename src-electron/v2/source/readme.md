# source

永続化層…であってると思う。

ファイル/URL/サブプロセス等とのデータのやり取りに責任を持つ。

- データを読み込んで壊れていたら修復してかえす
- データを正しく書き込む
- データをキャッシュして高速化する

## datapack / mod / plugin

データパック/Mod/Plugin のデータとそのメタデータの一覧を管理する

これらのデータは著作権の関係上、ShareWorld での単純な共有が出来ないので、ちょっと難しい。

また、ローカルとリモートの双方にこれらのデータが配置されるため、抽象化+共通化が必要

## player

Minecraft のプレイヤーの名前/UUID/スキン画像を管理する

実装自体は src-electron\core\player のモノを使いまわせるはず

## runtime

Java の実行ファイルを管理する

実装自体は src-electron\util\java のモノを使いまわせるはず

現状毎回 JAVA の全ファイルの正常性を確認しており実行が遅いので、ファイル正常性確認をスキップすることで高速化の余地あり。(優先度低)

## version

バニラ/Forge 等の各実行サーバーの jar(例外あり)のデータを管理する

ロジックは src-electron\core\version のモノを使いまわせるはず

だが、設計変更に伴って毎回ワールドを起動するたびに Spigot のクソ長ビルドが走ることになるので、
落としてきたバージョンデータをどこかにキャッシュしておくべき。(優先度中)

## server

実際にサーバーを起動するときにのフォルダとプロセス(java)を管理する

基本的に SarverStarter が起動しているときだけ存在するデータなはずだが、

サーバーを閉じずに PC をシャットダウンとか、SarverStarter をプロセスキルとかすると実行データが残り続けるので対策が必要。

## system

システム設定ファイルを管理する

パスワード等のデータが入るので暗号化必須

現状は src-electron\core\stores\system.ts にあるのでこれ使えばよさそう

データのバリデーションと修復も必要 zod 使用予定

## world

ワールドのデータを管理する

ワールド内のデータパック等/jarファイル等のデータは上記の通り別個管理するため、ここでは(共有可能な)ワールド本体のデータ+設定データだけを管理する

ローカルワールド と リモートワールド どちらも同じ手続きで管理したいので抽象化+共通化が必要
