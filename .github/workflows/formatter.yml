name: Formatter
on: [pull_request]

# secrets.GITHUB_TOKENã«ãƒªãƒã‚¸ãƒˆãƒªã¸ã®æ›¸ãè¾¼ã¿ã‚’è¨±å¯
permissions:
  contents: write

jobs:
  prettier:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: technote-space/get-diff-action@v6 #å·®åˆ†ã‚’å–å¾—ã™ã‚‹
        with:
          PATTERNS: |
            **/*.{ts,tsx,js,jsx,json,vue}
      - uses: actions/setup-node@v3 #nodeã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« & ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å–å¾—
        with:
          node-version: 18
          cache: 'yarn'
      - name: Run Prettier # prettierè‡ªä½“ã‚’å®Ÿè¡Œ
        run: |
          yarn
          yarn prettier --write ${{ env.GIT_DIFF_FILTERED }} --ignore-path .gitignore # ç’°å¢ƒå¤‰æ•°GIT_DIFF_FILTEREDã«å·®åˆ†ã®ã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãŒåˆ—æŒ™ã•ã‚Œã¦ã„ã‚‹
        if: env.GIT_DIFF
      - uses: stefanzweifel/git-auto-commit-action@v4 # ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒŸãƒƒãƒˆ
        with:
          commit_message: ğŸš¨ Apply Prettier Change
